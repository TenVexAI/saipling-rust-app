import { useEffect, useRef, useState } from 'react';

interface SaiplingChatLogoProps {
  size?: number;
  className?: string;
}

export function SaiplingChatLogo({ size = 100, className }: SaiplingChatLogoProps) {
  const strokeRef = useRef<SVGPathElement>(null);
  const [showFill, setShowFill] = useState(false);
  const [drawStroke, setDrawStroke] = useState(false);

  useEffect(() => {
    const fillTimer = setTimeout(() => setShowFill(true), 200);
    const strokeTimer = setTimeout(() => setDrawStroke(true), 500);
    return () => {
      clearTimeout(fillTimer);
      clearTimeout(strokeTimer);
    };
  }, []);

  useEffect(() => {
    const el = strokeRef.current;
    if (!el) return;
    if (drawStroke) {
      const length = el.getTotalLength();
      el.style.strokeDasharray = `${length}`;
      el.style.strokeDashoffset = `${length}`;
      el.getBoundingClientRect();
      el.style.transition = 'stroke-dashoffset 2.5s ease-in-out';
      el.style.strokeDashoffset = '0';
    }
  }, [drawStroke]);

  return (
    <svg
      width={size}
      height={size}
      viewBox="500 350 650 500"
      xmlns="http://www.w3.org/2000/svg"
      className={className}
    >
      <path
        fill="#3cf281"
        d="M785.4,363.5c21.3-6.5,44-9,65.9-9.8c47.4-1.8,96.2,7.6,138.1,30.5c77,42.1,129.6,145.1,81.7,227.8
          c-4.9,8.4-10.7,16.3-17.2,23.6c-43.4,48.7-115.9,67.1-179.1,65.6c-45.3-1.1-90.6-17.7-125.2-47c-38.3-32.5-58.6-79.9-60.3-129.7
          c-0.6-18.6,0.3-37.5,3.1-55.9c5-33.1,23.2-63.5,50-83.7C755.3,375,769.9,368.2,785.4,363.5z"
        style={{
          opacity: showFill ? 1 : 0,
          transition: 'opacity 0.5s ease-in',
        }}
      />
      <path
        ref={strokeRef}
        fill="none"
        stroke="var(--logo-stroke)"
        strokeWidth="10"
        strokeLinecap="round"
        strokeMiterlimit="10"
        d="M874.8,461.9c-54.9-1.2-145.9,73.6-133.2,26.9c7.1-26.1,44.4-31.2,66.7-27.2c10.4,1.8,23.4,6.2,28.1,16.7
          c10.7,23.8-8,44.5-26.9,56.7C789,548,764.9,556.8,740.5,557c-25.3,0.2-46.7-12-67.1-25.7c-53.1-35.6-64.5,25.9-12.1,28.9
          c21.9,1.3,39.6-10.2,40.6-33.2c0.9-21.6-11.2-40-23.9-56.4c-11.9-15.3-26.5-36.5-13.2-55.8c18.8-27.3,59.1-6.6,82.3,1.5
          c36.4,12.6,77.2,26.2,112.6,3.4c10.3-6.7,21.2-18.3,20.2-31.7c-0.9-11.4-14-27.8-25.8-17.8c-7.2,6-4.7,19-1.9,26.5
          c6.3,16.8,23.5,25.7,38.6,33.3c2.1,1.1,4.3,2.1,6.4,3.2c1.1,0.5,2.2,1.1,3.4,1.6c9,4.4,18.6,7.9,28.1,10.9
          c10.3,3.2,27.6,10.1,37.9,3c7-4.8,7.2-16.4,0-21.1c-9.5-6.3-23.3,5.2-30.3,10.8c-33,26.5-47.9,67.7-69.8,102.7
          c-16.3,26.1-36.7,51.5-66.3,62.8c-43.4,16.5-12.7-44.9,83.2-44.9c95.9,0,111.5-62.1,79.6-48.8c-70.2,29.1-61.7,120.9-5.5,160
          c25.3,17.6,62.3,22.7,83-4.7c7.9-10.4,13.3-24.4,13.8-37.6c0.3-7.1-1.5-19.8-11.5-14.4c-15.7,8.4-14.2,33,0.1,42
          c16.1,10,33.5,0,44.3-12.9c27.4-32.7,25.1-81.6,14.2-119.5c-7.8-27-24.5-53.4-49.3-68.8c-6.5-4-15.5-7-23.1-4.9
          c-12.7,3.5-11.8,20.8-4.7,29.1c6,7,15.4,4,20-2.9c4.8-7.3,6.9-16.7,6.9-25.4c-0.1-42.5-30.1-76.3-62.2-99.1
          c-19.3-13.8-61.6-39.4-83.5-15.9c-5.4,5.7-9,14.4-8.6,22.5c0.6,10.5,9.7,17.6,20.2,15.3c9.8-2.2,16-12.3,15.6-21.9
          c-1.1-32-37.3-40.4-63.1-42.7c-36.4-3.3-80.1-5.2-113.9,10.8c-4.8,2.3-9.3,5.1-13.2,8.7c-5.8,5.3-9.9,13.1-10.3,21
          c-0.4,7.4,3.4,16,10.6,18.8c8.3,3.2,16.4-3,19.5-10.5c5.3-13.3-7.9-24.5-18.7-29.2c-13.8-6-29.5-4.6-43.9-1.8
          c-14.8,2.9-29,8-42.5,14.8c-19.6,9.9-36,23.2-50.9,39.3c-9.3,10.1-20.1,21-22.9,34.9c-0.3,1.5-0.5,3-0.6,4.6
          c-0.5,9.3,5.3,18.5,14.5,20.8c8.7,2.2,18-2.9,21.4-11.2c3.2-8,0-17.8-8.7-20.5c-8.4-2.6-17.8,2.1-24.5,6.7
          c-27,18.2-40.5,51.9-43.6,83.4c-0.9,9.6-0.4,19.5,1.4,29c1.7,9,4.7,19.6,12.2,25.5c11.7,9.1,34.2,0.5,36.2-14.5
          c1.2-9.3-9.6-13.6-17.1-14.4c-9.7-1-20.7,2.2-24.5,12.1c-4.4,11.2,1.4,23.5,7.7,32.7c4,5.9,8.7,11.4,13.8,16.4
          c30.9,30.5,89.2,56,131.1,33.8c6.6-3.5,12.9-8.9,15.9-16c2.4-5.6,3-14.4-3-18c-5-3-10.7,0.3-14.3,3.9c-8.4,8.1-8.9,20.2-6,30.9
          c1.7,6.4,4.4,12.6,7.9,18.2c8.3,13.3,20.6,23.7,34.4,30.8c14.1,7.3,30.1,11.3,46,11.3c15.6,0,31.3-4.1,44.3-12.9
          c8.6-5.8,19.9-14.9,20-26.5c0.1-6.6-5.3-13.3-12-14.2c-9.1-1.2-13.2,8.5-14.5,15.9c-2,11.5,1.1,23.2,6.1,33.6
          c2.9,6,6.4,11.7,10.1,17.3c8.6,12.9,18.6,24.8,28.9,36.3c7.8,8.8,16.2,17.2,23.7,26.2c1.2,1.4,2.4,2.8,3.4,4.4
          c9.6,14.8,26.7,24.3,28.9-10.6c1.1-17.5-20.5-50.9-28.6-58.5c-8.1-7.5-17.6,2.2,5.4,28c23.8,26.7,101.3,12.7,129.9-26.2"
        style={{
          opacity: drawStroke ? 1 : 0,
        }}
      />
    </svg>
  );
}
